# IML DataSoft Project

The project consists of 4 parts: web, backend, node.js api, python api. Coded for master's thesis. It is based on the comparison of data collected from the real environment and data generated by the simulator with deep learning algorithms. As a result, it was observed that the simulator data was close to the real environment data. On the web project, there are screens such as entering real world data, creating simulator data, adding error types for the simulator, running the algorithm with the data set and comparing the algorithm results.

<br/>

# Web (NextJS)

IML DataSoft Web Project is coded with Next.js. General information is given below.

## Getting Started

First, install packages:

```bash
npm install
# or
yarn install
```

Run the development server:

```bash
npm run dev
# or
yarn dev
```

Open [http://localhost:3000](http://localhost:3000) with your browser to see the result.

## Learn More

To learn more about Next.js, take a look at the following resources:

- [Next.js Documentation](https://nextjs.org/docs) - learn about Next.js features and API.
- [Learn Next.js](https://nextjs.org/learn) - an interactive Next.js tutorial.

You can check out [the Next.js GitHub repository](https://github.com/vercel/next.js/) - your feedback and contributions are welcome!


## Project

```
  # Pages;

  - Login
  - Sign Up
  - Homepage
  - User Settings
  - Simulators
  - Real Dataset
  - Anomali Types
  - Algorithms
  - Run Algorithm
  - Compare Algorithm
```


![Backend](https://github.com/AyberkCakar/iml-datasoft-nextjs-web/assets/38071168/54729b8d-82cd-4650-b8b9-2c01401571b1)



## Useful resources
* [Changelog](https://github.com/AyberkCakar/iml-datasoft/blob/main/nextjs-web/CHANGELOG.md)

<br/> <br/> <br/> <br/>

# Backend (Hasura)

## Run

The following command can be executed to up a local hasura environment:

```bash
docker-compose up -d
```

## Applying Migrations

Hasura service in our docker environment applies found migrations in its migration folder automatically on start.

So, after getting changes from master branch with:

```bash
git pull
```

Containers should be up with:

```bash
docker-compose up -d
```

or if they are already up, just restart them:

```bash
docker-compose restart
```

That's all. All migrations will be applied in your local server.

## Reaching Hasura Console

The following command can be executed to gain access to the hasura console:

```bash
docker-compose exec hasura hasura-cli console --console-port 64643 --no-browser --address 0.0.0.0
```

Hasura console will be available at <http://localhost:64643>

If there is an error, just try to execute the command again, since hasura may not be ready yet.

## Squashing Migrations

The following command can be executed to squash migrations into one migration from version `1589810113314`

```bash
docker-compose exec hasura hasura-cli migrate squash --name "<name>" --from 1589810113314
```

For detailed information see:

[Hasura CLI: hasura migrate squash](https://hasura.io/docs/1.0/graphql/manual/hasura-cli/hasura_migrate_squash.html)


## Database

PostgreSql is used as database. Database works integrated with hasura. The database consists of 9 tables.

```
  - users
  - simulators
  - simulator_parameters
  - real_datasets
  - failure_types
  - datasets
  - algorithms
  - algorithm_settings
  - algorithm_results

```


<br/> <br/> <br/> <br/>

# Python REST API

Deploy methods of IML DataSoft Python REST API project are given below.

### Project Publishing Instructions
The project can be published in two different ways.
* Docker
* Pip

#### Installation with Docker
To publish the project on Docker, go to the project directory and write the following codes;

```

  # deploy project with docker
  $ docker-compose up

  # compile docker files
  $ docker-compose build
  
```

#### Installation with Pip
To publish the project in Pip, go to the project directory and write the following codes;

```

  # package install
  $ pip install -r requirements.txt

  # python start
  $ flask run

  # rabbitmq consumer start
  $ python3 consumer.py

  # project start
  $ bash start.sh
  
```

### Project Information
It is the Python REST API of the IML DataSoft Project, connected to the Hasura backend. There are Simulator and AI Hub in the Python API. It is supported with Flask structure and queue structure is established with rabbitmq.

#### Simulator
It is triggered when a record is added to the simulators table in the backend and generates synthetic data containing selected error types.

```

  # Generated Data Types
  - Sound
  - Vibration
  - Temperature

  
```

#### AI Hub
It is triggered when a record is added to the algorithm_results table. It runs the selected data set and selected deep learning algorithms. It queues all deep learning run requests in the incoming trigger with rabbitmq and runs them sequentially via consumer.

```

  # Deep Learning Algorithms
  - ABOD Outlier Detection
  - Autoencoder Outlier Detection
  - CBLOF Outlier Detection
  - Deep Autoencoder Outlier Detection
  - Ensemble Outlier Detection
  - Feature Bagging Outlier Detection
  - GMM Outlier Detection
  - GRU Anomaly Detection
  - HOBS Outlier Detection
  - Isolation Forest
  - K-Means Outlier Detection
  - KNN Outlier Detection
  - Local Outlier Factor
  - LSTM Anomaly Detection
  - LSTM Autoencoder
  - PCA Outlier Detection
  - Robust Covariance Outlier Detection
  - RNN Anomaly Detection
  - XGBoost Outlier Detection
  
```


<br/> <br/> <br/> <br/>

# NodeJS REST API

Deploy methods of IML DataSoft NodeJS REST API project are given below.

### Project Publishing Instructions
The project can be published in two different ways.
* Docker
* NPM

#### Installation with Docker
To publish the project on Docker, go to the project directory and write the following codes;

```

  # deploy project with docker
  $ docker-compose up

  # install docker database backup
  $ cat <sql_filename> | docker exec -i <container_name> mysql -u root --password=root <database_name>
  
  # compile docker files
  $ docker-compose build
  
```

#### Installation with NPM
To publish the project in NPM, go to the project directory and write the following codes;

```

  # package install
  $ npm install

  # project start
  $ npm start
  
```

### Running the Project as a Developer
As a developer, to start the project and do the test operations, first go to the project directory and install the packages, then give the necessary command to start the mode.

```

  # package install
  $ npm install

  # project start
  $ npm run start:dev
  
```

## Useful resources
* [Changelog](https://github.com/AyberkCakar/iml-datasoft/blob/main/nodejs-api/CHANGELOG.md)
